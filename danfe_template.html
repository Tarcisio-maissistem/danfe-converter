<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="utf-8">
<title>DANFE</title>
<style>
    @page { size: A4 portrait; margin: 6mm 6mm 6mm 6mm !important; }
    * { box-sizing: border-box; }
    body { font-family: "Times New Roman", Times, serif; font-size: 10px; color: #000; margin: 0; padding: 0; line-height: 1.15; }
    
    .box { border: 1px solid #000; border-radius: 6px; margin-bottom: 4px; overflow: hidden; display: flex; flex-direction: column; }
    .row { display: flex; width: 100%; }
    .col { padding: 1px 3px; border-right: 1px solid #000; display: flex; flex-direction: column; position: relative; }
    .col:last-child { border-right: none; }
    .bt { border-top: 1px solid #000; }
    .bb { border-bottom: 1px solid #000; }
    .noborder { border: none !important; }

    .lbl { font-family: Arial, sans-serif; font-size: 6px; text-transform: uppercase; margin-bottom: 1px; }
    .val { font-family: "Times New Roman", Times, serif; font-size: 10px; font-weight: bold; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .val-sm { font-size: 9px; font-weight: normal; }
    .val-lg { font-size: 11px; font-weight: bold; }
    .val-xl { font-size: 19px; font-weight: bold; }
    .center { text-align: center; }
    .right { text-align: right; }

    .sec-header {
        font-family: Arial, sans-serif; font-size: 7px; font-weight: bold; text-transform: uppercase;
        border-bottom: 1px solid #000; padding: 2px 4px; background: #f0f0f0;
    }

    .op-box {
        border: 1px solid #000; width: 26px; height: 26px; display: flex; align-items: center; justify-content: center;
        font-size: 19px; font-weight: bold; float: right; margin: 0 4px;
    }

    table.prod { width: 100%; border-collapse: collapse; }
    table.prod th {
        font-family: Arial, sans-serif; font-size: 6px; font-weight: bold; text-align: center;
        border-right: 1px solid #000; border-bottom: 1px solid #000; padding: 2px 1px;
    }
    table.prod th:last-child { border-right: none; }
    table.prod td {
        font-size: 9px; padding: 2px 3px; border-right: 1px solid #000;
        border-top: none !important; border-bottom: none !important;
        vertical-align: middle; height: 16px;
    }
    table.prod td:last-child { border-right: none; }
    table.prod tr { border: none !important; }

    .barcode-img { width: 100%; height: auto; max-height: 48px; display: block; margin: 0 auto; }
</style>
</head>
<body>

<!-- CANHOTO -->
<div class="box" style="height: 28px;">
    <div class="row">
        <div class="col" style="flex: 1;">
            <div class="lbl">RECEBEMOS DE</div>
            <div class="val-sm">{{ emit_nome }}</div>
            <div class="lbl" style="font-size:5px; margin-top:auto;">OS PRODUTOS CONSTANTES DA NOTA FISCAL INDICADA AO LADO</div>
        </div>
        <div class="col center" style="width: 15%;"></div>
        <div class="col center" style="width: 35%;"></div>
        <div class="col center" style="width: 15%; border-right:none; text-align:right; padding-right:8px;">
            <div style="font-size:14px; font-weight:bold;">NF-e</div>
            <div style="font-size:18px; font-weight:bold; line-height:1;">Nº {{ numero }}</div>
            <div style="font-size:11px;">Série {{ serie }}</div>
        </div>
    </div>
</div>

<div style="border-top: 1px dashed #000; margin: 4px 0 6px 0;"></div>

<!-- CABEÇALHO PRINCIPAL -->
<div class="box">
    <div class="row" style="height: 110px;">
        <div class="col" style="width: 38%; justify-content: center; align-items: center; padding:8px;">
            <div class="lbl" style="position: absolute; top: 2px; left: 4px;">IDENTIFICAÇÃO DO EMITENTE</div>
            <div style="font-size: 19px; font-weight: bold; text-align:center; margin:10px 0 6px;">{{ emit_nome }}</div>
            <div style="font-size: 9px; text-align:center; line-height:1.3;">
                {{ emit_ender_full }}<br>
                Fone: {{ emit_fone }} - CEP: {{ emit_cep }}
            </div>
        </div>

        <div class="col center" style="width: 12%;">
            <div style="font-size: 28px; font-weight: bold; margin-top:8px;">DANFE</div>
            <div class="lbl" style="font-size:6px; margin:4px 0 8px;">DOCUMENTO AUXILIAR DA<br>NOTA FISCAL ELETRÔNICA</div>
            <div style="margin-bottom:8px;">
                <div class="op-box">{{ tp_nf }}</div>
                <div style="font-size:8px; text-align:right; margin-right:6px; line-height:1;">0-Entrada<br>1-Saída</div>
            </div>
            <div style="font-size:19px; font-weight:bold;">{{ numero }}</div>
            <div style="font-size:11px;">Série {{ serie }}</div>
            <div style="font-size:8px; margin-top:4px;">Folha 1/1</div>
        </div>

        <div class="col" style="width: 50%; padding:0;">
            <div style="height: 56px; border-bottom: 1px solid #000; padding: 4px 8px; display:flex; align-items:center;">
                <img src="{{ barcode }}" class="barcode-img">
            </div>
            <div style="padding:4px 6px; border-bottom:1px solid #000;">
                <div class="lbl">CHAVE DE ACESSO</div>
                <div style="font-size:12.5px; font-weight:bold; letter-spacing:1.8px; text-align:center;">{{ chave }}</div>
            </div>
            <div style="padding:6px; text-align:center; font-size:9px;">
                Consulta de autenticidade no portal nacional da NF-e<br>
                www.nfe.fazenda.gov.br/portal ou no site da Sefaz Autorizadora
            </div>
        </div>
    </div>

    <div class="row bt">
        <div class="col" style="width:60%;"><div class="lbl">NATUREZA DA OPERAÇÃO</div><div class="val">{{ nat_op }}</div></div>
        <div class="col" style="width:40%;"><div class="lbl">PROTOCOLO DE AUTORIZAÇÃO</div><div class="val">{{ prot_nfe }} - {{ dh_prot }}</div></div>
    </div>

    <div class="row bt">
        <div class="col" style="width:33%;"><div class="lbl">INSCRIÇÃO ESTADUAL</div><div class="val">{{ emit_ie }}</div></div>
        <div class="col" style="width:33%;"><div class="lbl">INSCRIÇÃO ESTADUAL DO SUBST. TRIB.</div><div class="val">{{ emit_ie_st }}</div></div>
        <div class="col" style="width:34%;"><div class="lbl">CNPJ</div><div class="val">{{ emit_cnpj }}</div></div>
    </div>
</div>

<!-- DESTINATÁRIO -->
<div class="box">
    <div class="sec-header">DESTINATÁRIO / REMETENTE</div>
    <div class="row">
        <div class="col" style="width:60%;"><div class="lbl">NOME / RAZÃO SOCIAL</div><div class="val">{{ dest_nome }}</div></div>
        <div class="col" style="width:25%;"><div class="lbl">CNPJ / CPF</div><div class="val">{{ dest_cnpj }}</div></div>
        <div class="col" style="width:15%;"><div class="lbl">DATA DA EMISSÃO</div><div class="val right">{{ dh_emi }}</div></div>
    </div>
    <div class="row bt">
        <div class="col" style="width:45%;"><div class="lbl">ENDEREÇO</div><div class="val-sm">{{ dest_lgr }}</div></div>
        <div class="col" style="width:25%;"><div class="lbl">BAIRRO / DISTRITO</div><div class="val-sm">{{ dest_bairro }}</div></div>
        <div class="col" style="width:15%;"><div class="lbl">CEP</div><div class="val">{{ dest_cep }}</div></div>
        <div class="col" style="width:15%;"><div class="lbl">DATA SAÍDA/ENTRADA</div><div class="val right">{{ dh_sai }}</div></div>
    </div>
    <div class="row bt">
        <div class="col" style="width:45%;">
            <div class="row"><div style="flex:1;"><div class="lbl">MUNICÍPIO</div><div class="val-sm">{{ dest_mun }}</div></div>
            <div style="width:40px; border-left:1px solid #000; padding-left:3px;"><div class="lbl">UF</div><div class="val">{{ dest_uf }}</div></div></div>
        </div>
        <div class="col" style="width:25%;"><div class="lbl">FONE / FAX</div><div class="val">{{ dest_fone }}</div></div>
        <div class="col" style="width:15%;"><div class="lbl">INSCRIÇÃO ESTADUAL</div><div class="val">{{ dest_ie }}</div></div>
        <div class="col" style="width:15%;"><div class="lbl">HORA SAÍDA</div><div class="val right">{{ h_sai }}</div></div>
    </div>
</div>

<!-- CÁLCULO DO IMPOSTO -->
<div class="box">
    <div class="sec-header">CÁLCULO DO IMPOSTO</div>
    <div class="row">
        <div class="col" style="flex:1;"><div class="lbl">BASE DE CÁLCULO ICMS</div><div class="val right">{{ v_bc }}</div></div>
        <div class="col" style="flex:1;"><div class="lbl">VALOR DO ICMS</div><div class="val right">{{ v_icms }}</div></div>
        <div class="col" style="flex:1;"><div class="lbl">BASE CÁLC. ICMS S.T.</div><div class="val right">{{ v_bc_st }}</div></div>
        <div class="col" style="flex:1;"><div class="lbl">VALOR ICMS SUBST.</div><div class="val right">{{ v_st }}</div></div>
        <div class="col" style="flex:1;"><div class="lbl">VALOR IMP. IMPORTAÇÃO</div><div class="val right">0,00</div></div>
        <div class="col" style="flex:1;"><div class="lbl">VALOR TOTAL PRODUTOS</div><div class="val right">{{ v_prod }}</div></div>
    </div>
    <div class="row bt">
        <div class="col" style="flex:1;"><div class="lbl">VALOR DO FRETE</div><div class="val right">{{ v_frete }}</div></div>
        <div class="col" style="flex:1;"><div class="lbl">VALOR DO SEGURO</div><div class="val right">{{ v_seg }}</div></div>
        <div class="col" style="flex:1;"><div class="lbl">DESCONTO</div><div class="val right">{{ v_desc }}</div></div>
        <div class="col" style="flex:1;"><div class="lbl">OUTRAS DESPESAS</div><div class="val right">{{ v_outro }}</div></div>
        <div class="col" style="flex:1;"><div class="lbl">VALOR DO IPI</div><div class="val right">{{ v_ipi }}</div></div>
        <div class="col" style="flex:1;"><div class="lbl">VALOR TOTAL DA NOTA</div><div class="val right" style="font-size:14px; font-weight:bold;">{{ v_nf }}</div></div>
    </div>
</div>

<!-- TRANSPORTADOR -->
<div class="box">
    <div class="sec-header">TRANSPORTADOR / VOLUMES TRANSPORTADOS</div>
    <div class="row">
        <div class="col" style="width:40%;"><div class="lbl">RAZÃO SOCIAL</div><div class="val">{{ transp_nome }}</div></div>
        <div class="col" style="width:15%;"><div class="lbl">FRETE POR CONTA</div><div class="val">{{ transp_mod }}</div></div>
        <div class="col" style="width:10%;"><div class="lbl">CÓDIGO ANTT</div><div class="val"></div></div>
        <div class="col" style="width:15%;"><div class="lbl">PLACA DO VEÍCULO</div><div class="val"></div></div>
        <div class="col" style="width:5%;"><div class="lbl">UF</div><div class="val">{{ transp_uf }}</div></div>
        <div class="col" style="width:15%;"><div class="lbl">CNPJ / CPF</div><div class="val">{{ transp_cnpj }}</div></div>
    </div>
    <div class="row bt">
        <div class="col" style="width:40%;"><div class="lbl">ENDEREÇO</div><div class="val">{{ transp_ender }}</div></div>
        <div class="col" style="width:30%;"><div class="lbl">MUNICÍPIO</div><div class="val">{{ transp_mun }}</div></div>
        <div class="col" style="width:30%;"><div class="lbl">INSCRIÇÃO ESTADUAL</div><div class="val">{{ transp_ie }}</div></div>
    </div>
    <div class="row bt">
        <div class="col" style="width:10%;"><div class="lbl">QUANTIDADE</div><div class="val center">{{ transp_qvol }}</div></div>
        <div class="col" style="width:20%;"><div class="lbl">ESPÉCIE</div><div class="val">{{ transp_esp }}</div></div>
        <div class="col" style="width:20%;"><div class="lbl">MARCA</div><div class="val"></div></div>
        <div class="col" style="width:20%;"><div class="lbl">NUMERAÇÃO</div><div class="val"></div></div>
        <div class="col" style="width:15%;"><div class="lbl">PESO BRUTO</div><div class="val right">{{ transp_peso_b }}</div></div>
        <div class="col" style="width:15%;"><div class="lbl">PESO LÍQUIDO</div><div class="val right">{{ transp_peso_l }}</div></div>
    </div>
</div>

<!-- ITENS -->
<div class="box">
    <div class="sec-header">DADOS DOS PRODUTOS / SERVIÇOS</div>
    <table class="prod">
        <thead>
            <tr>
                <th width="8%">CÓDIGO</th>
                <th>DESCRIÇÃO DO PRODUTO / SERVIÇO</th>
                <th width="8%">NCM/SH</th>
                <th width="4%">CST</th>
                <th width="4%">CFOP</th>
                <th width="4%">UN</th>
                <th width="7%">QTDE.</th>
                <th width="8%">V.UNIT.</th>
                <th width="8%">V.TOTAL</th>
                <th width="8%">BC ICMS</th>
                <th width="8%">V.ICMS</th>
                <th width="8%">V.IPI</th>
                <th width="4%">ALIQ.<br>ICMS</th>
                <th width="4%">ALIQ.<br>IPI</th>
            </tr>
        </thead>
        <tbody>
            {% for p in produtos %}
            <tr>
                <td class="center">{{ p.cprod }}</td>
                <td style="font-size:8.5px;">{{ p.xprod }}</td>
                <td class="center">{{ p.ncm }}</td>
                <td class="center">{{ p.cst }}</td>
                <td class="center">{{ p.cfop }}</td>
                <td class="center">{{ p.ucom }}</td>
                <td class="right">{{ p.qcom }}</td>
                <td class="right">{{ p.vuncom }}</td>
                <td class="right">{{ p.vprod }}</td>
                <td class="right">{{ p.bc_icms }}</td>
                <td class="right">{{ p.v_icms }}</td>
                <td class="right">{{ p.v_ipi }}</td>
                <td class="right">{{ p.aliq_icms }}</td>
                <td class="right">{{ p.aliq_ipi }}</td>
            </tr>
            {% endfor %}
            {% for i in range(15 - produtos|length) %}
            <tr><td colspan="14" style="height:16px;">&nbsp;</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- DADOS ADICIONAIS -->
<div class="box">
    <div class="sec-header">DADOS ADICIONAIS</div>
    <div class="row" style="min-height:80px;">
        <div class="col" style="width:70%; border-right:1px solid #000;">
            <div class="lbl">INFORMAÇÕES COMPLEMENTARES</div>
            <div style="font-size:8px; white-space:pre-wrap; margin-top:4px;">{{ inf_cpl }}</div>
        </div>
        <div class="col" style="width:30%;">
            <div class="lbl">RESERVADO AO FISCO</div>
        </div>
    </div>
</div>

</body>
</html>